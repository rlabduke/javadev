<html><head><title>CHANGELOG</title></head><body><!-- (jEdit options) :folding=explicit:collapseFolds=1: --><pre>
==============================================================================
===  TO DO  ==================================================================
==============================================================================
    Weird PDBs:
        1ACX - weird geom leads to weird bonding patterns
        We could modify AtomGroup.connectHeavyAtoms()
        to keep only the N shortest bonds...
    color by residue type (each AA, base, etc has its own color)
    How to draw: only A alts? only atoms with B -lt 30? Q -gt 0.66?
        Use custom Crayon.shouldPrint() or create new Model (not recommended)
        But how to do the GUI?
    RibbonPrinter doesn't honor Crayon.shouldPrint()
    VDW, Ball+Stick, Ribbon engines should be separated from their GUIs
        public boolean showXXX = false
        element color map should be pluggable, not from Util
    The case for ribbon to ball-and-stick communication:
        BnS sidechains should draw to a ribbon guidepoint -- which residues,
        and how to get out the guidepoint coordinates?
        Sidechains should just generate the guidepoints for themselves!
    H checkbox should be disabled when no H are present!
    Black ribbon edges need a more careful crayon
    Nucleic acid ribbons should be wider (3? 2?)
  * Fancy ribbons must use crayons and colorsets
    Disulfides: collect Cys residues; bondsBetween(Cys, sc, Cys, sc);
        collect all residues in those bonds; draw sc in yellow

==============================================================================
===  CHANGE LOG  =============================================================
==============================================================================

### 0.12 ###
- changed how Crayons work, to allow them to also filter atoms/bonds
- changed StickPrinter to honor Crayon.shouldPrint()
- matched AltConfCrayon and ProteinSecStructCrayon to the new Crayon interface
- changed ConstCrayon to the new Crayon interface
- changed extra digits in ___Printer classes to be optional
- added variable width output to skeined ribbons
- added methods for 1, 2, 3, and 5-skeined ribbons
- moved drawing logic from gui.RibbonPane into logic.RibbonLogic.
  This will facilitate building a command-line UI later on.
- set black-edged ribbons as the default output of RibbonLogic
- fixed higher/lower in wholebond printer
- got nucleic acid ribbons working
- nucleic acid ribbons now match Prekin for B. Golden's "twort" structure
- protein ribbons still match Prekin for 1UBQ

### 0.11 ###
- plugin now marks kin as modified on Append, but not on New (may be throwaway)
- started Ribbons.get(Protein|NucAcid)Contigs()
- added classes GuidePoint, RibbonPrinter, and RibbonPane
- updated MainGuiPane to include ribbons option
- added GuidePoint.prevRes and .nextRes
- added RibbonCrayon and ProteinSecStructCrayon; ribbons are now colored by SS
- added [+] and [-] icons to the MainGuiPane interface
- merged BondOptimizer code into Bond to reduce total number of classes

### 0.10 ###
- removed all the justifyLeft()'s from PrekinIDer after profiling showed that
  to be a hotspot. Formatting numbers and lowercasing are still expensive.
- made waters peachtint, 0.15 to match Prekin
- added AltConfCrayon to handle alt conf pointmasters; set it in GUI
- added CompositeCrayon to allow multiple crayons to play well together
- made changes in driftwood.moldb2 to fix alt conf problem with 1US0, etc.
  C conf had few atoms; fill-in with duplication created many extra A copies.
  Drawing still seems to work fine now that fill-in is done without cloning.
- complexified Util.getElement() b/c 1US0 has junk letters in 1st atom name pos
- removed Util.is(H|Q|CNO|S|Disulfide) b/c they suffer from the same problems.
- 1US0 still doesn't quite work b/c "AC.." is a valid element name!
- removed Util.getElement() b/c we now have moldb2.Atom.getElement()
- this has finally fixed the problems with rendering 1US0
- Calphas / pseudo-backbone is "off" if we're also doing mainchain
- added a few more NA names based on Prekin's NAList
- added _CM2 and _O3P for tr0001 to Util.isMainchain()
- modified gui.SelectorPane to show chains/models only if there are multiple
- fixed insets on SelectorPane's text field for residue numbers
- B factor is only printed in point ID if != 0

### 0.09 ###
- modified the GUI to iterate models, chains at top level; not per panel
  This keeps colors consistent and pieces grouped together.
  Changes to moldb2.Model make the chains come out in order, too.
- changed defaults for BallAndStickPane
- tr0001 OMC 32 caught a possible endless loop in BondOptimizer.extendLeft()
- added pluggable point IDs and matched default to Prekin output
- added check for whether half-bond midpoint is actually needed
- added ability to remove a DrawingPane from the GUI, or to remove all
- added Util.getVdwRadius(), based on Probe's atomprops.h
- added gui.VanDerWaalsPane to do ball/sphere vdW renderings
- created much nicer interface for KiNG plugin; removed old one
- tweaked layout on MainGuiPane

### 0.08 ###
- changed sort order of Bonds to work better with:
- added Util.optimizeBondSequence() for cleaner kinemages
- experimenting with up-front optimization of the set of all bonds shows this
  doesn't improve kinemage connectivity once bonds are broken into mc, sc, etc.
- added Bond.reverse() to facilitate optimizing the connectivity. Is this a good idea???
- NO! added "mirror" field to Bond instead, so they remain immutable.
- elaborated on Util.selectBondsBetween() based on StickPrinter experience
- added BondOptimizer, which can now truly maximize the connectedness
  Adding calls to this from StickPrinter actually speeds things up, as well as
  reduces the size of the kinemage file.
- streamlined the operation of BallAndStickPane a bit
- added PseudoBackbone for doing C-alpha traces and DNA/RNA pseudo bb.
- finished implementation of pseudo-backbone and C-alpha traces
- mocked up a (non-functional) full GUI screen
- finished work on main GUI screen (for the time being); it seems to work well

### 0.07 ###
- simplified StickPrinter and made it significantly faster (!)
- added halfbond capability to StickPrinter
- Oops! Putative speed-up was just a bug (not drawing any sidechains).
  Still, StickPrinter is simplified with no measurable performance penalty.
- improved SelectorPane layout constraints
- added BallAndStickPane; controls are not functional yet
- changed selection API slightly in SelectorPane
- added DataCache for caching calculated geometry data for each model
- added Sets of Residues to ResClassifier
- started moving printing logic out of Test and into BallAndStickPane;
  protein drawing is now working in BallAndStickPane
- simplified BallPrinter
- completed all drawing in BallAndStickPane except pseudobb and atom balls
- added getElement() and getElementColor() to Util
- added BallAndStickPane.printAtomBalls() and hooked it up to the GUI
- moved the "covalent" naming out of AtomGraph and into DataCache.
  This allows us to easily make AtomGraph an abstract class in the future,
  instances of which might concern covalent bonds, H-bonds, etc etc.

### 0.06 ###
- fixed isX() typo bugs in Util
- added BallPrinter
- further subdivided atoms in AtomClassifier
- added BondCrayon, AtomCrayon, and ConstCrayon
- modified BallPrinter and StickPrinter to take a Crayon object
- added primitive SelectorPane and tested it for selecting sc to draw
- added ResRanger for managing range selection statements
- added range support to SelectorPane and coupled List to TextField
- fixed inclusive/exclusive index issue with BitSet in ResRanger
- text field selections are now coupled to the list
- testing against 1RTU, 1EMA: the protein MODRES is pink (het) but still
  connected as it should be ... this seems like a reasonable result.
  Plus, I can't fix it without screwing up other hets!

### 0.05 ###
- added isProtein, isNucleicAcid, and isIon to Util
- added ResClassifier to decide protein/nucleic/ion/water/het
- added AtomClassifier to decide bb/sc and heavy/H
- added BondClassifier to get standard kinemage groupings (bb/sc, prot/het)
- added some extra sets to AtomClassifier for convenience
- rewrote Test in terms of the new classes -- shorter and cleaner
- removed BondClassifier; on further thought, it's not necessary

### 0.04 ###
- string interning in moldb seems to have sped things up across the board,
  though I'm not sure why -- maybe faster comparisons somewhere?
- updated Test b/c driftwood.moldb2.ModelGroup became CoordinateFile

### 0.03 ###
- refactored Test to accept either PDB or mmCIF input
- stopped Test from printing xxxlists when there is no content
- created KingMoleculeImporter as a plugin to load PDBs/mmCIFs directly in KiNG
  It uses Test to do its drawing and (at the moment) is not configurable.
- changed AtomGraph and Util.selectBondsBetween() to return a Collection of
  Bond objects, rather than a SortedSet. AtomGraph still uses TreeSet, but
  Util uses ArrayList b/c it's faster/cheaper and the Bonds are already sorted.
- tested importing 1JJ2 (lg. ribosomal subunit) into KiNG -- works pretty well,
  except that some hets are "bonded" to protein (same for 1BOV and others...)

### 0.02 ###
- added isSS(), isDisulfide() to Util
- added selectBondsBetween() to Util
- added getCovalentUnbonded() to AtomGraph
- added segregation by atom type and lots-like drawing to Test

### 0.01 ###
- created AtomGraph, Bond, Util
- created Test to do quick-and-dirty tests of the basic functions
- using Unix TIME, tested vs. Prekin on 1JJ2 -- comparable speed.
  Slower on 1UBQ, probably due to JITing (and other overhead?)

</pre></body></html>
